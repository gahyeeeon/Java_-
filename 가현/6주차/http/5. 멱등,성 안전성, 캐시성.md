# 5. 멱등성, 안전성, 캐시성

안전성(Safe)

|  | 안전 |
| --- | --- |
| GET | O |
| POST | X |
| PUT | X |
| PATCH | X |
| DELETE | X |

보안 취약성 x

호출해도 리소스가 변경되지 않는 성질

멱등성(Idempotent)

|  | 멱등 |
| --- | --- |
| GET | O |
| POST | X |
| PUT | O |
| PATCH | X |
| DELETE | O |

요청(Request)을 한 번을 호출하든 여러 번을 호출하든 그 결과가 같음을 의미

즉, 동일한 요청을 한 번 보내는 것과 여러 번 연속으로 보내는 것이 같은 효과를 가지고, 서버의 상태도 동일하게 남을 때 해당 http 메서드가 멱등성을 가진다고 함

safe 안전과 다름

**안전**이 한 번을 호출하든 여러 번을 호출하든 리소스에 수정이 발생하지 않는 속성

**멱등**은 리소스에 수정이 발생한다고 하더라도 메소드를 여러 번 실행한 결과가 한 번 실행한 결과와 같다면 만족하는 속성이라는 차이

GET 멱등 O

데이터를 한 번을 조회하든 여러 번을 조회하든 같은 결과가 조회되므로 안전과 멱등을 동시에 만족하는 메소드

멱등적이지 않은 GET의 설계

GET 요청을 여러 번 보낼 경우 서버의 데이터 상태는 매번 바뀌게 될 것

즉, HTTP 스펙에 부합하지 않게 API를 구현

GET 의 멱등성에 맞게 API를 설계하기 위해서는 조회수 칼럼의 값을 증가시키는 요청을 PATCH 요청으로 따로 분리하는 것이 옳음

멱등하다고 해서 결과가 항상 같은 x

DELETE의 멱등 O

GET이 단순 조회라면, DELETE는 단순 삭제

DELETE를 처음 요청 하면, 서버에서 해당 리소스는 삭제가 된다. 이후 DELETE를 여러번 요청하더라도 해당 리소스는 삭제된 상태 그대로 일 것이니 서버의 상태는 변하지 않는다.

POST의 멱등 X

멱등을 만족하지 않음

서버로 데이터를 전송하여 새로운 자원을 생성하는 역할

따라서 요청을 여러 번 보내는 경우 매번 새로운 자원이 생겨나는 것이며, 이는 서버의 상태가 변경되는 것을 의미

PUT의 멱등 O

대상 리소스를 덮어씌워 변경하거나 대상 리소스가 없다면 새로 추가

그래서 만일 대상 리소스가 없다면 PUT이 POST와 같은 동작을 하게 되는데, POST는 매번 새로운 자원을 만다는 반면 PUT은 해당 자원이 있다면 데이터만 덮어쓴다.

따라서 요청을 한번하든 여러번하든 결국 서버의 상태는 같아지니 PUT은 멱등

PATCH의 멱등

기본적으로 멱등성을 가지지 않는 메소드인데, 그 구현을 PUT과 동일한 방식으로 할 경우 멱등성을 가지게 되는 특성

즉, 멱등하게 설계할 수 있고, 멱등하지 않도록 설계할 수 있음

캐시 가능성 Casheable

|  | 캐시 가능 |
| --- | --- |
| GET | O |
| POST | O |
| PUT | X |
| PATCH | O |
| DELETE | X |

응답 결과 리소스를 캐싱해서 효율적으로 사용할 수 있는가에 대한 여부

캐시가 운영체제나 서버에만 있는 것이 아닌 브라우저 자체도 하나의 소프트웨어라 캐시 공간을 가지고 있는데, 클라이언트가 서버에 한 번 요청했던 데이터에 대한 매 요청마다 다시 전송할 필요가 없도록 브라우저가 임시적으로 데이터를 보관하고 있는 장소